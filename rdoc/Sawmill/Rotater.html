<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Sawmill::Rotater - Sawmill 0.1.17 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/sawmill/rotater/base.rb
    <li>lib/sawmill/rotater/date_based_log_file.rb
    <li>lib/sawmill/rotater/shifting_log_file.rb
    <li>lib/sawmill/rotater.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-new">::new</a>
    
    <li><a href="#method-i-create_channel">#create_channel</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../History_rdoc.html">History</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Sawmill.html">Sawmill</a>
  
    <li><a href="../Sawmill/Entry.html">Sawmill::Entry</a>
  
    <li><a href="../Sawmill/Entry/Attribute.html">Sawmill::Entry::Attribute</a>
  
    <li><a href="../Sawmill/Entry/BeginRecord.html">Sawmill::Entry::BeginRecord</a>
  
    <li><a href="../Sawmill/Entry/EndRecord.html">Sawmill::Entry::EndRecord</a>
  
    <li><a href="../Sawmill/Entry/Message.html">Sawmill::Entry::Message</a>
  
    <li><a href="../Sawmill/Entry/UnknownData.html">Sawmill::Entry::UnknownData</a>
  
    <li><a href="../Sawmill/EntryClassifier.html">Sawmill::EntryClassifier</a>
  
    <li><a href="../Sawmill/EntryProcessor.html">Sawmill::EntryProcessor</a>
  
    <li><a href="../Sawmill/EntryProcessor/All.html">Sawmill::EntryProcessor::All</a>
  
    <li><a href="../Sawmill/EntryProcessor/And.html">Sawmill::EntryProcessor::And</a>
  
    <li><a href="../Sawmill/EntryProcessor/Any.html">Sawmill::EntryProcessor::Any</a>
  
    <li><a href="../Sawmill/EntryProcessor/Base.html">Sawmill::EntryProcessor::Base</a>
  
    <li><a href="../Sawmill/EntryProcessor/BuildRecords.html">Sawmill::EntryProcessor::BuildRecords</a>
  
    <li><a href="../Sawmill/EntryProcessor/CompileReport.html">Sawmill::EntryProcessor::CompileReport</a>
  
    <li><a href="../Sawmill/EntryProcessor/CountEntries.html">Sawmill::EntryProcessor::CountEntries</a>
  
    <li><a href="../Sawmill/EntryProcessor/FilterByBasicFields.html">Sawmill::EntryProcessor::FilterByBasicFields</a>
  
    <li><a href="../Sawmill/EntryProcessor/FilterByBlock.html">Sawmill::EntryProcessor::FilterByBlock</a>
  
    <li><a href="../Sawmill/EntryProcessor/FilterByMessage.html">Sawmill::EntryProcessor::FilterByMessage</a>
  
    <li><a href="../Sawmill/EntryProcessor/Format.html">Sawmill::EntryProcessor::Format</a>
  
    <li><a href="../Sawmill/EntryProcessor/If.html">Sawmill::EntryProcessor::If</a>
  
    <li><a href="../Sawmill/EntryProcessor/InterpretStats.html">Sawmill::EntryProcessor::InterpretStats</a>
  
    <li><a href="../Sawmill/EntryProcessor/Not.html">Sawmill::EntryProcessor::Not</a>
  
    <li><a href="../Sawmill/EntryProcessor/Or.html">Sawmill::EntryProcessor::Or</a>
  
    <li><a href="../Sawmill/EntryProcessor/SimpleQueue.html">Sawmill::EntryProcessor::SimpleQueue</a>
  
    <li><a href="../Sawmill/Errors.html">Sawmill::Errors</a>
  
    <li><a href="../Sawmill/Errors/DSLMethodError.html">Sawmill::Errors::DSLMethodError</a>
  
    <li><a href="../Sawmill/Errors/IllegalRecordError.html">Sawmill::Errors::IllegalRecordError</a>
  
    <li><a href="../Sawmill/Errors/NoUniqueLogFileError.html">Sawmill::Errors::NoUniqueLogFileError</a>
  
    <li><a href="../Sawmill/Errors/SawmillError.html">Sawmill::Errors::SawmillError</a>
  
    <li><a href="../Sawmill/Errors/UnknownLevelError.html">Sawmill::Errors::UnknownLevelError</a>
  
    <li><a href="../Sawmill/Level.html">Sawmill::Level</a>
  
    <li><a href="../Sawmill/LevelGroup.html">Sawmill::LevelGroup</a>
  
    <li><a href="../Sawmill/LevelGroup/Builder.html">Sawmill::LevelGroup::Builder</a>
  
    <li><a href="../Sawmill/LogRecordMiddleware.html">Sawmill::LogRecordMiddleware</a>
  
    <li><a href="../Sawmill/Logger.html">Sawmill::Logger</a>
  
    <li><a href="../Sawmill/MultiParser.html">Sawmill::MultiParser</a>
  
    <li><a href="../Sawmill/Parser.html">Sawmill::Parser</a>
  
    <li><a href="../Sawmill/Railtie.html">Sawmill::Railtie</a>
  
    <li><a href="../Sawmill/Railtie/Configuration.html">Sawmill::Railtie::Configuration</a>
  
    <li><a href="../Sawmill/Record.html">Sawmill::Record</a>
  
    <li><a href="../Sawmill/RecordProcessor.html">Sawmill::RecordProcessor</a>
  
    <li><a href="../Sawmill/RecordProcessor/All.html">Sawmill::RecordProcessor::All</a>
  
    <li><a href="../Sawmill/RecordProcessor/And.html">Sawmill::RecordProcessor::And</a>
  
    <li><a href="../Sawmill/RecordProcessor/Any.html">Sawmill::RecordProcessor::Any</a>
  
    <li><a href="../Sawmill/RecordProcessor/Base.html">Sawmill::RecordProcessor::Base</a>
  
    <li><a href="../Sawmill/RecordProcessor/CompileReport.html">Sawmill::RecordProcessor::CompileReport</a>
  
    <li><a href="../Sawmill/RecordProcessor/CountRecords.html">Sawmill::RecordProcessor::CountRecords</a>
  
    <li><a href="../Sawmill/RecordProcessor/Decompose.html">Sawmill::RecordProcessor::Decompose</a>
  
    <li><a href="../Sawmill/RecordProcessor/FilterByAttributes.html">Sawmill::RecordProcessor::FilterByAttributes</a>
  
    <li><a href="../Sawmill/RecordProcessor/FilterByBlock.html">Sawmill::RecordProcessor::FilterByBlock</a>
  
    <li><a href="../Sawmill/RecordProcessor/FilterByRecordID.html">Sawmill::RecordProcessor::FilterByRecordID</a>
  
    <li><a href="../Sawmill/RecordProcessor/Format.html">Sawmill::RecordProcessor::Format</a>
  
    <li><a href="../Sawmill/RecordProcessor/If.html">Sawmill::RecordProcessor::If</a>
  
    <li><a href="../Sawmill/RecordProcessor/Not.html">Sawmill::RecordProcessor::Not</a>
  
    <li><a href="../Sawmill/RecordProcessor/Or.html">Sawmill::RecordProcessor::Or</a>
  
    <li><a href="../Sawmill/RecordProcessor/SimpleQueue.html">Sawmill::RecordProcessor::SimpleQueue</a>
  
    <li><a href="../Sawmill/Rotater.html">Sawmill::Rotater</a>
  
    <li><a href="../Sawmill/Rotater/Base.html">Sawmill::Rotater::Base</a>
  
    <li><a href="../Sawmill/Rotater/Channel.html">Sawmill::Rotater::Channel</a>
  
    <li><a href="../Sawmill/Rotater/DateBasedLogFile.html">Sawmill::Rotater::DateBasedLogFile</a>
  
    <li><a href="../Sawmill/Rotater/ShiftingLogFile.html">Sawmill::Rotater::ShiftingLogFile</a>
  
    <li><a href="../Sawmill/StatsMiddleware.html">Sawmill::StatsMiddleware</a>
  
    <li><a href="../Sawmill/StatsRailtie.html">Sawmill::StatsRailtie</a>
  
    <li><a href="../Sawmill/StatsRailtie/Configuration.html">Sawmill::StatsRailtie::Configuration</a>
  
    <li><a href="../Sawmill/Util.html">Sawmill::Util</a>
  
    <li><a href="../Sawmill/Util/Heap.html">Sawmill::Util::Heap</a>
  
    <li><a href="../Sawmill/Util/ProcessorTools.html">Sawmill::Util::ProcessorTools</a>
  
    <li><a href="../Sawmill/Util/Queue.html">Sawmill::Util::Queue</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Sawmill::Rotater</h1>

  <div id="description" class="description">
    
<p>The <a href="../Sawmill.html">Sawmill</a> <a
href="Rotater.html">Rotater</a> provides log rotation services for logfile
formatting, supporting several different log rotation strategies.</p>

<p>The formatter implemented by <a
href="EntryProcessor/Format.html">Sawmill::EntryProcessor::Format</a>
already recognizes a <a href="Rotater.html">Rotater</a> as a supported
destination, and automatically interfaces with it to ensure that log
records arenâ€™t split into multiple files by rotation.</p>

<p>You may also interface with a rotater manually. The core of rotater usage
is the <a href="Rotater/Channel.html">Channel</a>, which lets you ensure
that groups of log entries end up in the same log file regardless of log
rotation. Generally, to use a rotater, you obtain one or more channels and
write formatted entries to them, either telling them explicitly where the
allowable file breaks are, or by letting the rotater break the file
anywhere it wants. See the <a
href="Rotater.html#method-i-create_channel">#create_channel</a> method and
the <a href="Rotater/Channel.html">Channel</a> object for more details.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(io_manager_, opts_={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Create a rotater using the given rotation strategy. See <a
href="Rotater/DateBasedLogFile.html">Sawmill::Rotater::DateBasedLogFile</a>
and <a
href="Rotater/ShiftingLogFile.html">Sawmill::Rotater::ShiftingLogFile</a>
for examples of common strategies.</p>

<p>The rotation strategy can be passed as an object or as a class with a set
of options that will be used to instantiate the strategy. In addition to
those options, the following options are recognized:</p>
<dl class="rdoc-list label-list"><dt><code>:omit_directives</code>
<dd>
<p>If true, omit standard logfile directives. Default is false.</p>
</dd><dt><code>:concurrent_writes</code>
<dd>
<p>Set this to true if you expect multiple processes to attempt to write to
the same log file simultaneously. This option causes the rotater to
surround writes with an acquisition of the cooperative filesystem lock (if
available) for the logfile, in an attempt to prevent lines from
interleaving in one another. Default is false.</p>
</dd><dt><code>:encoding</code>
<dd>
<p>Specify an encoding for file data. (Ruby 1.9 only). You may pass either an
encoding object or an encoding name. If not specified, writes raw bytes
(e.g. defaults to ASCII-8BIT).</p>
</dd></dl>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/sawmill/rotater.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">io_manager_</span>, <span class="ruby-identifier">opts_</span>={})
  <span class="ruby-ivar">@omit_directives</span> = <span class="ruby-identifier">opts_</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:omit_directives</span>)
  <span class="ruby-ivar">@concurrent_writes</span> = <span class="ruby-identifier">opts_</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:concurrent_writes</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">SUPPORTS_ENCODING</span>
    <span class="ruby-ivar">@encoding</span> = <span class="ruby-identifier">opts_</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:encoding</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@encoding</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@encoding</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:name</span>)
      <span class="ruby-ivar">@encoding</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@encoding</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">io_manager_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Class</span>)
    <span class="ruby-ivar">@io_manager</span> = <span class="ruby-identifier">io_manager_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">opts_</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@io_manager</span> = <span class="ruby-identifier">io_manager_</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@handles</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@mutex</span> <span class="ruby-operator">||=</span> <span class="ruby-operator">::</span><span class="ruby-constant">Monitor</span>.<span class="ruby-identifier">new</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-create_channel" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_channel</span><span
            class="method-args">(opts_={})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="Rotater/Channel.html">Channel</a> for this <a
href="Rotater.html">Rotater</a>. See <a
href="Rotater/Channel.html">Sawmill::Rotater::Channel</a> for details on
the <a href="Rotater/Channel.html">Channel</a> object.</p>

<p>The following options are recognized:</p>
<dl class="rdoc-list label-list"><dt><code>:auto_rotate</code>
<dd>
<p>Put the channel in auto-rotate mode. In this mode, the rotater is allowed
to rotate the logfile at any time for that channel. It is the equivalent of
calling check_rotate on the channel after every write. Default is false.</p>
</dd></dl>
          

          
          <div class="method-source-code" id="create_channel-source">
            <pre><span class="ruby-comment"># File lib/sawmill/rotater.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_channel</span>(<span class="ruby-identifier">opts_</span>={})
  <span class="ruby-constant">Channel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">opts_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- create_channel-source -->
          
        </div>

        

        
      </div><!-- create_channel-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

